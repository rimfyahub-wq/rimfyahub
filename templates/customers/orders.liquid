{% comment %}
  Customer Orders Page
{% endcomment %}

<div class="orders-page">
  <div class="container" style="max-width: 1200px; margin: 0 auto; padding: 6rem 2rem 4rem;">
    <div class="page-header" style="margin-bottom: 3rem;">
      <h1 style="font-size: 2.5rem; font-weight: 700; background: linear-gradient(135deg, hsl(193, 100%, 65%), hsl(280, 100%, 70%)); -webkit-background-clip: text; background-clip: text; -webkit-text-fill-color: transparent; margin-bottom: 0.5rem;">
        Order History
      </h1>
      <a href="{{ routes.account_url }}" style="color: hsl(193, 100%, 65%); text-decoration: none;">
        ← Back to Account
      </a>
    </div>

    {% if customer.orders_count > 0 %}
      {% paginate customer.orders by 10 %}
        <div style="display: grid; gap: 1.5rem;">
          {% for order in customer.orders %}
            <div style="background: rgba(10,10,10,0.8); border: 1px solid rgba(255,255,255,0.1); border-radius: 12px; padding: 2rem;">
              <!-- Order Header -->
              <div style="display: flex; justify-content: space-between; align-items: start; margin-bottom: 1.5rem; padding-bottom: 1.5rem; border-bottom: 1px solid rgba(255,255,255,0.1);">
                <div>
                  <h2 style="font-size: 1.25rem; font-weight: 600; color: white; margin-bottom: 0.5rem;">
                    Order #{{ order.name }}
                  </h2>
                  <p style="font-size: 0.875rem; color: rgba(255,255,255,0.5);">
                    Placed on {{ order.created_at | date: "%B %d, %Y at %I:%M %p" }}
                  </p>
                </div>
                <div style="text-align: right;">
                  <span style="display: inline-block; padding: 0.5rem 1rem; background: rgba(0,229,255,0.2); border-radius: 20px; font-size: 0.875rem; color: hsl(193, 100%, 65%); margin-bottom: 0.5rem;">
                    {{ order.financial_status | replace: '_', ' ' | capitalize }}
                  </span>
                  <p style="font-size: 0.875rem; color: rgba(255,255,255,0.5);">
                    {{ order.fulfillment_status | replace: '_', ' ' | capitalize | default: 'Unfulfilled' }}
                  </p>
                </div>
              </div>

              <!-- Order Items -->
              <div style="margin-bottom: 1.5rem;">
                <h3 style="font-size: 1rem; font-weight: 600; color: rgba(255,255,255,0.8); margin-bottom: 1rem;">Items</h3>
                <div style="display: grid; gap: 1rem;">
                  {% for line_item in order.line_items %}
                    <div style="display: flex; gap: 1rem; padding: 1rem; background: rgba(255,255,255,0.03); border-radius: 8px;">
                      {% if line_item.image %}
                        <img src="{{ line_item.image | img_url: '80x80' }}" alt="{{ line_item.title }}" style="width: 80px; height: 80px; object-fit: cover; border-radius: 6px;">
                      {% else %}
                        <div style="width: 80px; height: 80px; background: rgba(255,255,255,0.05); border-radius: 6px; display: flex; align-items: center; justify-content: center;">
                          <svg width="40" height="40" viewBox="0 0 24 24" fill="none" stroke="rgba(255,255,255,0.3)" stroke-width="2">
                            <rect x="3" y="3" width="18" height="18" rx="2" ry="2"></rect>
                            <circle cx="8.5" cy="8.5" r="1.5"></circle>
                            <polyline points="21 15 16 10 5 21"></polyline>
                          </svg>
                        </div>
                      {% endif %}
                      <div style="flex: 1;">
                        <p style="font-weight: 600; color: white; margin-bottom: 0.25rem;">{{ line_item.title }}</p>
                        {% if line_item.variant_title and line_item.variant_title != 'Default Title' %}
                          <p style="font-size: 0.875rem; color: rgba(255,255,255,0.5); margin-bottom: 0.25rem;">{{ line_item.variant_title }}</p>
                        {% endif %}
                        <p style="font-size: 0.875rem; color: rgba(255,255,255,0.6);">
                          Quantity: {{ line_item.quantity }}
                        </p>
                      </div>
                      <div style="text-align: right;">
                        <p style="font-weight: 600; color: hsl(193, 100%, 65%);">{{ line_item.final_line_price | money }}</p>
                        {% if line_item.quantity > 1 %}
                          <p style="font-size: 0.875rem; color: rgba(255,255,255,0.5);">{{ line_item.final_price | money }} each</p>
                        {% endif %}
                      </div>
                    </div>
                  {% endfor %}
                </div>
              </div>

              <!-- Order Summary -->
              <div style="border-top: 1px solid rgba(255,255,255,0.1); padding-top: 1.5rem;">
                <div style="display: grid; gap: 0.5rem; max-width: 300px; margin-left: auto;">
                  <div style="display: flex; justify-content: space-between; color: rgba(255,255,255,0.6);">
                    <span>Subtotal:</span>
                    <span>{{ order.subtotal_price | money }}</span>
                  </div>
                  {% if order.total_discounts > 0 %}
                    <div style="display: flex; justify-content: space-between; color: rgba(0,229,255,0.8);">
                      <span>Discounts:</span>
                      <span>-{{ order.total_discounts | money }}</span>
                    </div>
                  {% endif %}
                  <div style="display: flex; justify-content: space-between; color: rgba(255,255,255,0.6);">
                    <span>Shipping:</span>
                    <span>{{ order.shipping_price | money }}</span>
                  </div>
                  <div style="display: flex; justify-content: space-between; color: rgba(255,255,255,0.6);">
                    <span>Tax:</span>
                    <span>{{ order.tax_price | money }}</span>
                  </div>
                  <div style="display: flex; justify-content: space-between; font-size: 1.125rem; font-weight: 700; color: white; padding-top: 0.75rem; border-top: 1px solid rgba(255,255,255,0.1); margin-top: 0.5rem;">
                    <span>Total:</span>
                    <span style="color: hsl(193, 100%, 65%);">{{ order.total_price | money }}</span>
                  </div>
                </div>
              </div>

              <!-- Shipping Address -->
              {% if order.shipping_address %}
                <div style="margin-top: 1.5rem; padding-top: 1.5rem; border-top: 1px solid rgba(255,255,255,0.1);">
                  <h3 style="font-size: 1rem; font-weight: 600; color: rgba(255,255,255,0.8); margin-bottom: 0.75rem;">Shipping Address</h3>
                  <div style="color: rgba(255,255,255,0.6); font-size: 0.875rem;">
                    <p>{{ order.shipping_address.first_name }} {{ order.shipping_address.last_name }}</p>
                    <p>{{ order.shipping_address.address1 }}</p>
                    {% if order.shipping_address.address2 != blank %}
                      <p>{{ order.shipping_address.address2 }}</p>
                    {% endif %}
                    <p>{{ order.shipping_address.city }}, {{ order.shipping_address.province_code }} {{ order.shipping_address.zip }}</p>
                    <p>{{ order.shipping_address.country }}</p>
                  </div>
                </div>
              {% endif %}
            </div>
          {% endfor %}
        </div>

        <!-- Pagination -->
        {% if paginate.pages > 1 %}
          <div style="margin-top: 3rem; display: flex; justify-content: center; gap: 0.5rem;">
            {% if paginate.previous %}
              <a href="{{ paginate.previous.url }}" style="padding: 0.75rem 1.25rem; background: rgba(0,229,255,0.1); border: 1px solid rgba(0,229,255,0.3); border-radius: 8px; color: hsl(193, 100%, 65%); text-decoration: none;">
                ← Previous
              </a>
            {% endif %}
            
            <span style="padding: 0.75rem 1.25rem; color: rgba(255,255,255,0.6);">
              Page {{ paginate.current_page }} of {{ paginate.pages }}
            </span>
            
            {% if paginate.next %}
              <a href="{{ paginate.next.url }}" style="padding: 0.75rem 1.25rem; background: rgba(0,229,255,0.1); border: 1px solid rgba(0,229,255,0.3); border-radius: 8px; color: hsl(193, 100%, 65%); text-decoration: none;">
                Next →
              </a>
            {% endif %}
          </div>
        {% endif %}
      {% endpaginate %}
    {% else %}
      <div style="background: rgba(10,10,10,0.8); border: 1px solid rgba(255,255,255,0.1); border-radius: 12px; padding: 4rem 2rem; text-align: center;">
        <svg width="64" height="64" viewBox="0 0 24 24" fill="none" stroke="rgba(255,255,255,0.2)" stroke-width="2" style="margin: 0 auto 1.5rem;">
          <circle cx="9" cy="21" r="1"></circle>
          <circle cx="20" cy="21" r="1"></circle>
          <path d="M1 1h4l2.68 13.39a2 2 0 0 0 2 1.61h9.72a2 2 0 0 0 2-1.61L23 6H6"></path>
        </svg>
        <h2 style="font-size: 1.5rem; font-weight: 600; color: rgba(255,255,255,0.8); margin-bottom: 0.75rem;">No Orders Yet</h2>
        <p style="color: rgba(255,255,255,0.5); margin-bottom: 2rem;">
          You haven't placed any orders yet. Start shopping to see your order history here!
        </p>
        <a href="/collections/all" style="display: inline-block; padding: 1rem 2rem; background: linear-gradient(135deg, hsl(193, 100%, 50%), hsl(280, 100%, 60%)); border-radius: 8px; color: white; text-decoration: none; font-weight: 600;">
          Start Shopping
        </a>
      </div>
    {% endif %}
  </div>
</div>

<style>
  body {
    background: #000;
    color: white;
  }
</style>
