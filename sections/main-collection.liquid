<section class="collection-section" data-mouse-glow>
  <!-- Animated Background Gradients -->
  <div class="collection-bg-gradient collection-bg-current" data-gradient-layer="current"></div>
  <div class="collection-bg-gradient collection-bg-next" data-gradient-layer="next"></div>
  
  <!-- Mouse Follow Glow -->
  <div class="mouse-glow-overlay"></div>

  <div class="container">
    <div class="collection-header">
      <h1 class="collection-title">{{ collection.title }}</h1>
      {% if collection.description != blank %}
        <p class="collection-description">{{ collection.description }}</p>
      {% endif %}
    </div>

    <div class="products-grid" style="--products-per-row: 3;">
      {% for product in collection.products %}
        <div class="product-card feature-card" data-animate-card style="--card-delay: {{ forloop.index0 | times: 0.1 }}s;">
          <a href="{{ product.url }}" class="product-link">
            {% if product.featured_image %}
              <div class="product-image-wrapper">
                <img 
                  src="{{ product.featured_image | img_url: '500x500' }}" 
                  alt="{{ product.title | escape }}"
                  loading="lazy"
                  class="product-image"
                >
                {% if product.compare_at_price > product.price %}
                  <span class="product-badge">Sale</span>
                {% endif %}
              </div>
            {% endif %}
            
            <div class="product-info">
              <h3 class="product-title">{{ product.title }}</h3>
              <div class="product-price">
                <span class="price-current">{{ product.price | money }}</span>
                {% if product.compare_at_price > product.price %}
                  <span class="price-compare">{{ product.compare_at_price | money }}</span>
                {% endif %}
              </div>
            </div>
          </a>
        </div>
      {% endfor %}
    </div>
  </div>
</section>

<style>
  .collection-section {
    position: relative;
    min-height: 100vh;
    padding: 8rem 0 4rem;
    background: linear-gradient(180deg, #000000 0%, #0a0a0a 100%);
    overflow: hidden;
  }

  .collection-bg-gradient {
    position: absolute;
    inset: 0;
    filter: blur(120px);
    transition: opacity 3s ease-in-out;
    z-index: 0;
    pointer-events: none;
  }

  .collection-bg-current {
    background: linear-gradient(135deg, hsl(193, 100%, 65%), hsl(280, 100%, 70%), hsl(330, 100%, 70%));
    opacity: 0.6;
  }

  .collection-bg-next {
    background: linear-gradient(135deg, hsl(30, 100%, 65%), hsl(330, 100%, 70%), hsl(280, 100%, 70%));
    opacity: 0;
  }

  @keyframes gradientMove {
    0%, 100% { transform: translate(0, 0) scale(1); }
    33% { transform: translate(10%, -10%) scale(1.1); }
    66% { transform: translate(-10%, 10%) scale(0.9); }
  }

  .collection-header {
    text-align: center;
    margin-bottom: 4rem;
    position: relative;
    z-index: 1;
  }

  .collection-title {
    font-size: 3rem;
    font-weight: 700;
    margin-bottom: 1rem;
    color: #ffffff;
  }

  .collection-description {
    font-size: 1.25rem;
    color: rgba(255, 255, 255, 0.7);
    max-width: 800px;
    margin: 0 auto;
  }

  .products-grid {
    display: grid;
    grid-template-columns: 1fr;
    gap: 2rem;
    position: relative;
    z-index: 1;
  }

  @media (min-width: 768px) {
    .products-grid {
      grid-template-columns: repeat(2, 1fr);
    }
  }

  @media (min-width: 1024px) {
    .products-grid {
      grid-template-columns: repeat(var(--products-per-row, 3), 1fr);
    }
  }
</style>

{% schema %}
{
  "name": "Collection",
  "settings": []
}
{% endschema %}
